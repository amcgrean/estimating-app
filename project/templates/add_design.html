{% extends "base.html" %}

{% block title %}Add New Design | Beisser.io{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h2 class="display-5 font-weight-bold" style="font-family: 'Outfit', sans-serif;">Add New Design</h2>
        <p class="text-muted small">Submit project details for a new architectural design request.</p>
    </div>
    <div class="col-md-4 text-right">
        <a href="{{ url_for('main.index') }}" class="btn btn-outline-secondary px-4 font-weight-600"
            style="border-radius: var(--radius-md);">
            <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
        </a>
    </div>
</div>

<div class="premium-card shadow-lg border-0" style="border-radius: var(--radius-lg);">
    <form action="{{ url_for('main.add_design') }}" method="POST" class="p-2">
        {{ form.hidden_tag() }}

        <div class="row">
            <!-- Left Column: Project Details -->
            <div class="col-lg-6 pr-lg-4 border-right">
                <h5 class="mb-4 text-primary d-flex align-items-center" style="font-size: 1rem; letter-spacing: 0.5px;">
                    <i class="fas fa-file-signature mr-2 small"></i> PROJECT INFORMATION
                </h5>

                <div class="form-group mb-4">
                    <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{ form.plan_name.label.text
                        }}</label>
                    {{ form.plan_name(class="input-modern", placeholder="e.g. Oakwood Estate - Main Floor") }}
                </div>

                <div class="form-group mb-4">
                    <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                        form.project_address.label.text }}</label>
                    {{ form.project_address(class="input-modern", placeholder="123 Builder St, City, ST") }}
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.branch_id.label.text }}</label>
                            {{ form.branch_id(class="input-modern") }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.plan_description.label.text }}</label>
                            {{ form.plan_description(class="input-modern") }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Assignments & Timeline -->
            <div class="col-lg-6 pl-lg-4">
                <h5 class="mb-4 text-primary d-flex align-items-center" style="font-size: 1rem; letter-spacing: 0.5px;">
                    <i class="fas fa-tasks mr-2 small"></i> ASSIGNMENT & DATES
                </h5>

                <div class="form-group mb-4">
                    <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                        form.customer_id.label.text }}</label>
                    {{ form.customer_id(class="input-modern select2-enable") }}
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.designer_id.label.text }}</label>
                            {{ form.designer_id(class="input-modern") }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.status.label.text }}</label>
                            {{ form.status(class="input-modern") }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.contractor.label.text }}</label>
                            {{ form.contractor(class="input-modern", placeholder="Contractor name...") }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-4">
                            <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{
                                form.preliminary_set_date.label.text }}</label>
                            {{ form.preliminary_set_date(class="input-modern", type="date") }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Full Width Section: Notes -->
            <div class="col-12 mt-4 pt-4 border-top">
                <div class="form-group mb-4">
                    <label class="font-weight-600 small text-uppercase tracking-wider mb-2">{{ form.notes.label.text
                        }}</label>
                    {{ form.notes(class="input-modern", rows="3", placeholder="Additional design specifications...") }}
                </div>

                <div class="d-flex justify-content-end gap-3 mt-4">
                    <button type="submit" class="btn-premium px-5 py-3">
                        <i class="fas fa-pencil-ruler mr-2"></i> Create Design
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('branch_id').onchange = function () {
        var branchId = this.value;
        var url = new URL(window.location.href);
        url.searchParams.set('branch_id', branchId);
        window.location.href = url.toString();
    };
</script>
{% endblock %}